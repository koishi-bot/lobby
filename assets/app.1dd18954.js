import{r as _,a7 as ue,M as W,d as E,k as B,a8 as pe,a9 as J,aa as oe,m as f,s as M,G as m,A as b,T as we,ab as $e,Z as Ce,a1 as Ee,q as w,x as L,N as I,n as $,B as T,F as te,e as Y,a4 as Z,ac as ve,o as ae,O as Q,j as Pe,H as de,v as se,ad as ke,ae as ze,E as A,J as U,t as O,_ as G,a6 as Ne,p as fe,h as Le,l as Ae,U as Be,K as Te,u as me,af as xe,ag as Ve,b as ee,ah as Re,ai as He,aj as Me,ak as Oe,al as De,am as Fe,an as We,ao as Ie,ap as Ke,aq as je,ar as Xe,f as Ye,as as Ue,at as Ge,au as qe,S as Je}from"./chunks/framework.20615fcf.js";import{u as _e,V as Ze,a as Qe,b as et,c as tt,d as at,e as st,f as ot,t as ne,g as nt}from"./chunks/theme.10a0aa9d.js";const he=Symbol("scrollbarContextKey"),R=4,rt={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},lt=({move:t,size:e,bar:a})=>({[a.size]:e,transform:`translate${a.axis}(${t}%)`});function re(t,e="px"){if(!t)return"";if(typeof t=="number"||ct(t))return`${t}${e}`;if(typeof t=="string")return t}const ct=t=>typeof t!="string"?!1:!Number.isNaN(Number(t));class it extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function ut(t,e){throw new it(`[${t}] ${e}`)}const pt=Symbol(""),le=_();function vt(t,e=void 0){const a=ue()?W(pt,le):le;return t?E(()=>{var s;return((s=a.value)==null?void 0:s[t])??e}):a}const dt="el",ft="is-",V=(t,e,a,s,n)=>{let c=`${t}-${e}`;return a&&(c+=`-${a}`),s&&(c+=`__${s}`),n&&(c+=`--${n}`),c},ye=t=>{const e=vt("namespace",dt);return{namespace:e,b:(o="")=>V(e.value,t,o,"",""),e:o=>o?V(e.value,t,"",o,""):"",m:o=>o?V(e.value,t,"","",o):"",be:(o,p)=>o&&p?V(e.value,t,o,p,""):"",em:(o,p)=>o&&p?V(e.value,t,"",o,p):"",bm:(o,p)=>o&&p?V(e.value,t,o,"",p):"",bem:(o,p,h)=>o&&p&&h?V(e.value,t,o,p,h):"",is:(o,...p)=>{const h=p.length>=1?p[0]:!0;return o&&h?`${ft}${o}`:""},cssVar:o=>{const p={};for(const h in o)o[h]&&(p[`--${e.value}-${h}`]=o[h]);return p},cssVarName:o=>`--${e.value}-${o}`,cssVarBlock:o=>{const p={};for(const h in o)o[h]&&(p[`--${e.value}-${t}-${h}`]=o[h]);return p},cssVarBlockName:o=>`--${e.value}-${t}-${o}`}},mt={vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean},_t="Thumb",ce=B({__name:"thumb",props:mt,setup(t){const e=t,a=W(he),s=ye("scrollbar");a||ut(_t,"can not inject scrollbar context");const n=_(),c=_(),l=_({}),v=_(!1);let d=!1,u=!1,z=$e?document.onselectstart:null;const i=E(()=>rt[e.vertical?"vertical":"horizontal"]),C=E(()=>lt({size:e.size,move:e.move,bar:i.value})),P=E(()=>n.value[i.value.offset]**2/a.wrapElement[i.value.scrollSize]/e.ratio/c.value[i.value.offset]),o=y=>{var r;if(y.stopPropagation(),y.ctrlKey||[1,2].includes(y.button))return;(r=window.getSelection())==null||r.removeAllRanges(),h(y);const S=y.currentTarget;S&&(l.value[i.value.axis]=S[i.value.offset]-(y[i.value.client]-S.getBoundingClientRect()[i.value.direction]))},p=y=>{if(!c.value||!n.value||!a.wrapElement)return;const S=Math.abs(y.target.getBoundingClientRect()[i.value.direction]-y[i.value.client]),r=c.value[i.value.offset]/2,N=(S-r)*100*P.value/n.value[i.value.offset];a.wrapElement[i.value.scroll]=N*a.wrapElement[i.value.scrollSize]/100},h=y=>{y.stopImmediatePropagation(),d=!0,document.addEventListener("mousemove",g),document.addEventListener("mouseup",k),z=document.onselectstart,document.onselectstart=()=>!1},g=y=>{if(!n.value||!c.value||d===!1)return;const S=l.value[i.value.axis];if(!S)return;const r=(n.value.getBoundingClientRect()[i.value.direction]-y[i.value.client])*-1,N=c.value[i.value.offset]-S,F=(r-N)*100*P.value/n.value[i.value.offset];a.wrapElement[i.value.scroll]=F*a.wrapElement[i.value.scrollSize]/100},k=()=>{d=!1,l.value[i.value.axis]=0,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",k),K(),u&&(v.value=!1)},D=()=>{u=!1,v.value=!!e.size},x=()=>{u=!0,v.value=d};pe(()=>{K(),document.removeEventListener("mouseup",k)});const K=()=>{document.onselectstart!==z&&(document.onselectstart=z)};return J(oe(a,"scrollbarElement"),"mousemove",D),J(oe(a,"scrollbarElement"),"mouseleave",x),(y,S)=>(f(),M(we,{name:b(s).b("fade")},{default:m(()=>[Ce(w("div",{ref_key:"instance",ref:n,class:L([b(s).e("bar"),b(s).is(i.value.key)]),onMousedown:p},[w("div",{ref_key:"thumb",ref:c,class:L(b(s).e("thumb")),style:I(C.value),onMousedown:o},null,38)],34),[[Ee,y.always||v.value]])]),_:1},8,["name"]))}}),ht={always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}},yt=B({__name:"bar",props:ht,setup(t,{expose:e}){const a=t,s=_(0),n=_(0);return e({handleScroll:l=>{if(l){const v=l.offsetHeight-R,d=l.offsetWidth-R;n.value=l.scrollTop*100/v*a.ratioY,s.value=l.scrollLeft*100/d*a.ratioX}}}),(l,v)=>(f(),$(te,null,[T(ce,{move:s.value,ratio:l.ratioX,size:l.width,always:l.always},null,8,["move","ratio","size","always"]),T(ce,{move:n.value,ratio:l.ratioY,size:l.height,vertical:"",always:l.always},null,8,["move","ratio","size","always"])],64))}}),bt={height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:[String,Object,Array],default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}},gt={scroll:({scrollTop:t,scrollLeft:e})=>[t,e].every(a=>typeof a=="number")},St={name:"ElScrollbar"},wt=B({...St,props:bt,emits:gt,setup(t,{expose:e,emit:a}){const s=t,n=a,c=ye("scrollbar");let l,v;const d=_(),u=_(),z=_(),i=_("0"),C=_("0"),P=_(),o=_(1),p=_(1),h=E(()=>{const r={};return s.height&&(r.height=re(s.height)),s.maxHeight&&(r.maxHeight=re(s.maxHeight)),[s.wrapStyle,r]}),g=E(()=>[s.wrapClass,c.e("wrap"),{[c.em("wrap","hidden-default")]:!s.native}]),k=E(()=>[c.e("view"),s.viewClass]),D=()=>{var r;u.value&&((r=P.value)==null||r.handleScroll(u.value),n("scroll",{scrollTop:u.value.scrollTop,scrollLeft:u.value.scrollLeft}))};function x(r,N){ke(r)?u.value.scrollTo(r):typeof r=="number"&&typeof N=="number"&&u.value.scrollTo(r,N)}const K=r=>{typeof r=="number"&&(u.value.scrollTop=r)},y=r=>{typeof r=="number"&&(u.value.scrollLeft=r)},S=()=>{if(!u.value)return;const r=u.value.offsetHeight-R,N=u.value.offsetWidth-R,F=r**2/u.value.scrollHeight,q=N**2/u.value.scrollWidth,j=Math.max(F,s.minSize),X=Math.max(q,s.minSize);o.value=F/(r-F)/(j/(r-j)),p.value=q/(N-q)/(X/(N-X)),C.value=j+R<r?`${j}px`:"",i.value=X+R<N?`${X}px`:""};return Y(()=>s.noresize,r=>{r?(l==null||l(),v==null||v()):({stop:l}=ze(z,S),v=J("resize",S))},{immediate:!0}),Y(()=>[s.maxHeight,s.height],()=>{s.native||Q(()=>{var r;S(),u.value&&((r=P.value)==null||r.handleScroll(u.value))})}),Z(he,ve({scrollbarElement:d,wrapElement:u})),ae(()=>{s.native||Q(()=>{S()})}),Pe(()=>S()),e({wrapRef:u,update:S,scrollTo:x,setScrollTop:K,setScrollLeft:y,handleScroll:D}),(r,N)=>(f(),$("div",{ref_key:"scrollbarRef",ref:d,class:L(b(c).b())},[w("div",{ref_key:"wrapRef",ref:u,class:L(g.value),style:I(h.value),onScroll:D},[(f(),M(de(r.tag),{ref_key:"resizeRef",ref:z,class:L(k.value),style:I(r.viewStyle)},{default:m(()=>[A(r.$slots,"default")]),_:3},8,["class","style"]))],38),r.native?se("",!0):(f(),M(yt,{key:0,ref_key:"barRef",ref:P,height:C.value,width:i.value,always:r.always,"ratio-x":p.value,"ratio-y":o.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});const $t=B({__name:"badge",props:{type:{type:String,default:"tip"},text:{type:String},vertical:{type:String}},setup(t){return(e,a)=>(f(),$("span",{class:L(["badge",t.type]),style:I({verticalAlign:t.vertical})},[A(e.$slots,"default",{},()=>[U(O(t.text),1)],!0)],6))}});const Ct=G($t,[["__scopeId","data-v-7c00ca57"]]),Et={class:"spoiler"},Pt=B({__name:"spoiler",props:{text:{type:String}},setup(t){return(e,a)=>(f(),$("span",Et,[A(e.$slots,"default",{},()=>[U(O(t.text),1)],!0)]))}});const kt=G(Pt,[["__scopeId","data-v-da7cfc96"]]),zt=["src"],Nt={class:"nickname"},Lt={class:"message-box"},At=B({__name:"chat-message",props:{nickname:{},color:{},avatar:{}},setup(t,{expose:e}){const a={Alice:"#cc0066",Bob:"#00994d",Carol:"#1e90ff",Dave:"#f4a460"},s={Koishi:"https://koishi.chat/logo.png"},n=t,c=_(!1),l=_(!1),v=_(!1),d=_(),u=E(()=>n.color||a[n.nickname]),z=E(()=>n.avatar||s[n.nickname]);function i(){let g;for(const k of document.querySelectorAll(".chat-message")){if(k===d.value)return g;g=k}}Y(l,g=>{if(!g)return c.value=!1;const k=i();if(!k||k.getBoundingClientRect().bottom<0)return P();const x=k.__vue__.exposed;x.moving.value||!x.shown.value?x.onappear(P):P()});let C=()=>{};function P(){c.value=!0,v.value=!0,setTimeout(()=>{v.value=!1,C()},100)}function o(){d.value.getBoundingClientRect().top<innerHeight&&(l.value=!0)}const p=ue();return e({moving:v,shown:c,onappear(g){C=g}}),ae(()=>{d.value.__vue__=p,o(),addEventListener("scroll",o),addEventListener("resize",o)}),pe(()=>{removeEventListener("scroll",o),removeEventListener("resize",o)}),(g,k)=>(f(),$("div",{ref_key:"root",ref:d,class:L(["chat-message",{shown:c.value}])},[z.value?(f(),$("img",{key:0,class:"avatar",src:z.value},null,8,zt)):(f(),$("div",{key:1,class:"avatar",style:I({backgroundColor:u.value})},O(g.nickname[0]),5)),w("div",Nt,O(g.nickname),1),w("div",Lt,[A(g.$slots,"default",{},()=>[U("Â ")])])],2))}});const Bt={props:{controls:Boolean,title:String},data:()=>({tab:"default"}),computed:{mini(){return!this.controls&&!this.title}}};const Tt={class:"controls"},xt=w("div",{class:"circle red"},null,-1),Vt=w("div",{class:"circle yellow"},null,-1),Rt=w("div",{class:"circle green"},null,-1),Ht={class:"title"},Mt={key:0,class:"title-text"},Ot={class:"content"};function Dt(t,e,a,s,n,c){return f(),$("div",{class:L(["panel-view",{mini:c.mini}])},[w("div",Tt,[xt,Vt,Rt,w("div",Ht,[a.title?(f(),$("span",Mt,O(a.title),1)):se("",!0)])]),w("div",Ot,[A(t.$slots,"default")])],2)}const Ft=G(Bt,[["render",Dt]]),Wt={class:"tab-select"},It={class:"header"},Kt=["onClick"],jt=B({__name:"tab-select",setup(t){const e=Ne(),a=E(()=>Object.keys(e).filter(n=>n.startsWith("tab-")).map(n=>n.slice(4))),s=Jt(a);return(n,c)=>(f(),$("div",Wt,[w("div",It,[(f(!0),$(te,null,fe(a.value,l=>(f(),$("span",{key:l,class:L({active:b(s)===l}),onClick:v=>s.value=l},[A(n.$slots,"title-"+l,{},()=>[U(O(l),1)])],10,Kt))),128))]),A(n.$slots,"tab-"+b(s))]))}});const Xt=w("div",{class:"curtain"},null,-1),Yt={class:"vp-sidebar-nav"},Ut=B({__name:"sidebar",props:{open:{type:Boolean}},setup(t){const{hasSidebar:e,sidebarGroups:a}=_e(),s=t,n=_(null);return Le(async()=>{var c;s.open&&(await Q(),(c=n.value)==null||c.wrapRef.focus())}),(c,l)=>{const v=Ae("ElScrollbar");return b(e)?(f(),M(v,{key:0,tag:"aside",class:L(["VPSidebar",{open:c.open}]),"view-class":"vp-sidebar-view",ref_key:"navEl",ref:n,onClick:l[0]||(l[0]=Be(()=>{},["stop"]))},{default:m(()=>[Xt,w("nav",Yt,[A(c.$slots,"sidebar-nav-before"),(f(!0),$(te,null,fe(b(a),d=>(f(),$("div",{key:d.text,class:"group"},[T(Ze,{item:d,depth:0},null,8,["item"])]))),128)),A(c.$slots,"sidebar-nav-after")])]),_:3},8,["class"])):se("",!0)}}});const Gt=B({__name:"Layout",setup(t){const{isOpen:e,open:a,close:s,hasSidebar:n}=_e(),c=Te();Y(()=>c.path,s),Qe(e,s),Z("close-sidebar",s),Z("is-sidebar-open",e);const{frontmatter:l}=me(),v=W(be),d=W("NotFound"),u=E(()=>{var C;return v.layouts[(C=l.value.layout)==null?void 0:C.toLowerCase()]||v.layouts.default}),z=E(()=>({"has-sidebar":n.value})),i=E(()=>({[`layout-${l.value.layout}`]:l.value.layout}));return(C,P)=>(f(),$("div",{class:L(["Layout",i.value])},[T(st),T(et,{class:"backdrop",show:b(e),onClick:b(s)},null,8,["show","onClick"]),T(tt,null,{"nav-bar-title-before":m(()=>[]),"nav-bar-title-after":m(()=>[]),"nav-bar-content-before":m(()=>[]),"nav-bar-content-after":m(()=>[]),"nav-screen-content-before":m(()=>[]),"nav-screen-content-after":m(()=>[]),_:1}),T(at,{open:b(e),onOpenMenu:b(a)},null,8,["open","onOpenMenu"]),T(Ut,{open:b(e)},{"sidebar-nav-before":m(()=>[A(C.$slots,"sidebar-nav-before",{},void 0,!0)]),"sidebar-nav-after":m(()=>[A(C.$slots,"sidebar-nav-after",{},void 0,!0)]),_:3},8,["open"]),w("div",{class:L(["VPContent",z.value]),id:"VPContent"},[b(c).component===b(d)?(f(),M(b(d),{key:0})):(f(),M(de(u.value),{key:1},{"doc-footer-before":m(()=>[]),"doc-before":m(()=>[]),"doc-after":m(()=>[]),"aside-top":m(()=>[]),"aside-bottom":m(()=>[]),"aside-outline-before":m(()=>[]),"aside-outline-after":m(()=>[]),"aside-ads-before":m(()=>[]),"aside-ads-after":m(()=>[]),_:1}))],2),T(ot)],2))}});const qt=G(Gt,[["__scopeId","data-v-c495affc"]]);const be=Symbol.for("theme-config"),ge=Symbol.for("client-config");function Jt(t){const e=W(ge);return E({get:()=>{const a=Ve(t);return e.tabs.find(s=>a.includes(s))||a[0]},set:a=>{const s=e.tabs.indexOf(a);s>=0&&e.tabs.splice(s,1),e.tabs.unshift(a)}})}const ie=1;function Zt(t){const e=xe("koishi.docs.config",{});return e.value.version!==ie?e.value={...t,version:ie}:e.value={...t,...e.value},ve(e.value)}const Qt=(t={})=>({...ne,Layout:qt,...t,enhanceApp(e){var s;e.app.component("ElScrollbar",wt),e.app.component("Badge",Ct),e.app.component("Spoiler",kt),e.app.component("ChatMessage",At),e.app.component("ChatPanel",Ft),e.app.component("TabSelect",jt);const a={default:nt};for(const n in t.layouts)a[n.toLowerCase()]=t.layouts[n];e.app.provide("NotFound",ne.NotFound),e.app.provide(be,{layouts:a}),e.app.provide(ge,Zt({tabs:[]})),(s=t.enhanceApp)==null||s.call(t,e)}}),ea=Qt();function Se(t){if(t.extends){const e=Se(t.extends);return{...e,...t,async enhanceApp(a){e.enhanceApp&&await e.enhanceApp(a),t.enhanceApp&&await t.enhanceApp(a)}}}return t}const H=Se(ea),ta=B({name:"VitePressApp",setup(){const{site:t}=me();return ae(()=>{Ye(()=>{document.documentElement.lang=t.value.lang,document.documentElement.dir=t.value.dir})}),Ue(),Ge(),qe(),H.setup&&H.setup(),()=>Je(H.Layout)}});async function aa(){const t=oa(),e=sa();e.provide(He,t);const a=Me(t.route);return e.provide(Oe,a),e.component("Content",De),e.component("ClientOnly",Fe),Object.defineProperties(e.config.globalProperties,{$frontmatter:{get(){return a.frontmatter.value}},$params:{get(){return a.page.value.params}}}),H.enhanceApp&&await H.enhanceApp({app:e,router:t,siteData:We}),{app:e,router:t,data:a}}function sa(){return Ie(ta)}function oa(){let t=ee,e;return Ke(a=>{let s=je(a),n=null;return s&&(t&&(e=s),(t||e===s)&&(s=s.replace(/\.js$/,".lean.js")),n=Xe(()=>import(s),[])),ee&&(t=!1),n},H.NotFound)}ee&&aa().then(({app:t,router:e,data:a})=>{e.go().then(()=>{Re(e.route,a.site),t.mount("#app")})});export{aa as createApp};
